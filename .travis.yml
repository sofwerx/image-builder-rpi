sudo: required
services:
  - docker
language: bash
script:
  - make shellcheck
  - VERSION=${TRAVIS_TAG} make sd-image
branches:
  only:
    - master
    - /^v\d.*$/
deploy:
  provider: releases
  skip_cleanup: true
  api_key: ${GITHUB_TOKEN}
  file:
    - rpi-tpms-${TRAVIS_TAG}.img.zip
    - rpi-tpms-${TRAVIS_TAG}.img.zip.sha256
  on:
    tags: true
    repo: ${TRAVIS_REPO_SLUG}
